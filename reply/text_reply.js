import { broadcastLog } from "../index.js";

export async function sendMessageWait(replyToken, client) {
    try {
        // ✅ กำหนดข้อความที่เป็นไปได้
        const messages = [
            "น้องแอดมินกำลังตรวจสอบให้นะค้าา ขออภัยที่ล่าช้านะ ขอเวลา 1-2 นาทีค่า 💐🤍🙏",
            "ขอเวลาแอดมินตรวจสอบสักครู่นะคะ แป๊บเดียวเท่านั้น เดี๋ยวน้องแอดมินรีบแจ้งให้ทราบนะคะ 🙇‍♂️🤗",
            "รอสักครู่นะค้าา น้องแอดมินรีบตรวจสอบให้อยู่ ขอเวลาสักครู่นะค้า 💜🙏",
            "กำลังตรวจสอบให้อยู่ค่ะ ขออภัยที่ล่าช้านะค้าา ขอเวลา 1-2 นาทีนะคะ 🙏💖",
            "แอดมินกำลังรีบดำเนินการให้อยู่ค่า ขอเวลาสักครู่น้าา เดี๋ยวแจ้งผลให้เลยค่า 🙇‍♂️✨",
            "รายการกำลังถูกตรวจสอบนะคะ เดี๋ยวแอดมินแจ้งให้ทราบอีกครั้งนะค้า 🌷🙇‍♂️💞",
            "แอดมินกำลังตรวจสอบและดำเนินการให้นะคะ ขอเวลาสักครู่ค่ะ 🙏🌟",
            "แอดมินกำลังตรวจสอบให้นะค้าา ขอเวลาอีกสักครู่เพื่อตรวจสอบให้น้าา  🌼📄💜"
        ];

        // ✅ เลือกข้อความแบบสุ่มที่ไม่ซ้ำเดิม
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];

        // ✅ ส่งข้อความสุ่มกลับไปยังผู้ใช้
        await client.replyMessage(replyToken, {
            type: "text",
            text: randomMessage
        });

        console.log(`ตอบกลับแล้ว: ${randomMessage}`);
        broadcastLog(`ตอบกลับแล้ว: ${randomMessage}`); // ส่งข้อความไปยังฟังก์ชัน broadcastLog
    } catch (err) {
        console.error("เกิดข้อผิดพลาดในการส่งข้อความแจ้งเตือนซ้ำ:", err.message || err);
        broadcastLog("เกิดข้อผิดพลาดในการส่งข้อความแจ้งเตือนซ้ำ:", err.message || err); // ส่งข้อความไปยังฟังก์ชัน broadcastLog
    }
}
